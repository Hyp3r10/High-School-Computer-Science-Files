import java.io.File;
import java.io.IOException;
import java.util.List;
import java.util.PriorityQueue;
import java.util.Scanner;

public class Dijkstra {
	public Graph graph;
	public Dijkstra(Graph graph) {
		this.graph = graph;
	}
	private void dijkstra(int source, int destination) {
		Vertex[] vertices = graph.vertices;
		vertices[source].setDistanceTo(0.0);
		PriorityQueue<Vertex> toSearch = new PriorityQueue<Vertex>();
		toSearch.add(vertices[source]);
		while(!toSearch.isEmpty()) {
			Vertex curr = toSearch.poll();
			List<Integer> edges = curr.edges;
			curr.setVisited(true);
			//int lowestIndex = -1;
			//double lowestWeight = Double.MAX_VALUE;
			for(Integer node : edges) {
				if(!vertices[node].visited) {
					vertices[node].setDistanceTo(curr.distance + curr.getDistanceTo(vertices[node]));
					System.out.println("\tlower " + node + " to " + String.format("%.1f", vertices[node].distance));
//					if(vertices[node].distance < lowestWeight) {
//						lowestWeight = vertices[node].distance;
//						lowestIndex = node;
//					}
					toSearch.add(vertices[node]);
				}
			}
			//toSearch.add(vertices[lowestIndex]);
			System.out.println("process node " + curr.ID + " (dist " + String.format("%.1f", curr.distance));
		}
		this.graph.vertices = vertices;
	}
	public static void main(String[] args) throws IOException {
		Scanner scan = new Scanner(new File("input6.txt"));
		Graph tester = new Graph(scan);
		System.out.println(tester.toString());
		Dijkstra d = new Dijkstra(tester);
		d.dijkstra(scan.nextInt(), scan.nextInt());
		System.out.println(d.graph);
	}
}
